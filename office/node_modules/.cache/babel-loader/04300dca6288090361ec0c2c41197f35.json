{"ast":null,"code":"var _jsxFileName = \"/Users/gwagbyeongjun/Sourcecode/react/aju-office/src/components/Editor/components/Screen.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Droppable, DragDropContext, Draggable, resetServerContext } from \"react-beautiful-dnd\";\nimport TemplateImage from \"./Template/TemplateImage\";\nimport TemplateEmty from \"./Template/TemplateEmty\";\nimport TemplateTitle from \"./Template/TemplateTitle\"; // import TemplateLink from \"./Template/TemplateLink\";\n\nimport TemplateVideo from \"./Template/TemplateVideo\"; // import TemplateYoutube from \"./Template/TemplateYoutube\";\n\nimport Summary from \"./Template/Summary\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nresetServerContext();\n\nfunction Screen({\n  temKey,\n  Fstore,\n  Fstorage\n}) {\n  _s();\n\n  const dispatch = useDispatch();\n  const template = useSelector(state => state.database.editor);\n  const [foucsIdx, setFoucsIdx] = useState(0);\n  const handleOnDragEnd = useCallback(result => {\n    setFoucsIdx(-1);\n    if (!result.destination) return;\n    const currentTags = [...template];\n    const beforeDragItemIndex = result.source.index;\n    const afterDragItemIndex = result.destination.index;\n    const removeTag = currentTags.splice(beforeDragItemIndex, 1);\n    currentTags.splice(afterDragItemIndex, 0, removeTag[0]);\n    dispatch({\n      type: \"@layouts/CHANGE_EDITOR\",\n      payload: currentTags\n    });\n  }, [template, dispatch]);\n\n  const __deleteTemplate = useCallback(idx => {\n    if (template.length > 1) {\n      setFoucsIdx(-1);\n      const arr = template.slice();\n      arr.splice(idx, 1);\n      dispatch({\n        type: \"@layouts/CHANGE_EDITOR\",\n        payload: arr\n      });\n    }\n  }, [template, dispatch]);\n\n  useEffect(() => {\n    function deleteTem(event) {\n      if (event.key === \"Backspace\" && template.length > 1) {\n        const arr = template.slice();\n        let nowTemplate = arr[foucsIdx];\n\n        if (nowTemplate.type !== \"TITLE\" && nowTemplate.type !== \"SUMMARY\") {\n          setFoucsIdx(-1);\n\n          if (nowTemplate.type === \"IMAGE\") {\n            const {\n              resize,\n              url\n            } = nowTemplate.content;\n            Fstorage.refFromURL(resize).delete();\n            Fstorage.refFromURL(url).delete();\n          }\n\n          if (nowTemplate.type === \"VIDEO\") {\n            Fstorage.refFromURL(nowTemplate.content).delete();\n          }\n\n          arr.splice(foucsIdx, 1);\n          Fstore.collection(\"editor\").doc(temKey).update({\n            template: arr\n          });\n          dispatch({\n            type: \"@layouts/CHANGE_EDITOR\",\n            payload: arr\n          });\n        } else {\n          arr.splice(foucsIdx, 1);\n\n          if (nowTemplate.type === \"TITLE\" && foucsIdx !== 0 && nowTemplate.content.length === 0) {\n            dispatch({\n              type: \"@layouts/CHANGE_EDITOR\",\n              payload: arr\n            });\n          }\n\n          if (nowTemplate.type === \"SUMMARY\" && nowTemplate.content.text.length === 0) {\n            nowTemplate.content.images.forEach(({\n              resize,\n              img\n            }) => {\n              Fstorage.refFromURL(resize).delete();\n              Fstorage.refFromURL(img).delete();\n              Fstore.collection(\"editor\").doc(temKey).update({\n                template: arr\n              });\n            });\n          }\n\n          setFoucsIdx(-1);\n        }\n      }\n    }\n\n    document.addEventListener(\"keydown\", deleteTem);\n    return () => {\n      document.removeEventListener(\"keydown\", deleteTem);\n    };\n  }, [foucsIdx, template, dispatch, temKey, Fstore, Fstorage]);\n  return /*#__PURE__*/_jsxDEV(DragDropContext, {\n    onDragEnd: handleOnDragEnd,\n    children: /*#__PURE__*/_jsxDEV(Droppable, {\n      droppableId: \"tags\",\n      direction: \"vertical\",\n      children: provided => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"editor-screen\",\n        ...provided.droppableProps,\n        ref: provided.innerRef,\n        children: [template.length > 0 ? template.map(({\n          type,\n          content,\n          id\n        }, idx) => {\n          return /*#__PURE__*/_jsxDEV(Draggable, {\n            draggableId: id,\n            index: idx,\n            children: provided => {\n              if (type === \"IMAGE\") {\n                return /*#__PURE__*/_jsxDEV(TemplateImage, {\n                  data: content,\n                  idx: idx,\n                  provided: provided,\n                  setFocus: setFoucsIdx,\n                  template: template,\n                  focusIdx: foucsIdx\n                }, idx, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 27\n                }, this);\n              } else if (type === \"TITLE\") {\n                return /*#__PURE__*/_jsxDEV(TemplateTitle, {\n                  data: content,\n                  provided: provided,\n                  idx: idx,\n                  setFocus: setFoucsIdx,\n                  focusIdx: foucsIdx,\n                  __delete: __deleteTemplate\n                }, idx, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 27\n                }, this);\n              } //  else if (type === 'LINK' || type === 'FILE') {\n              //   return (\n              //     <TemplateLink\n              //       key={idx}\n              //       data={content}\n              //       provided={provided}\n              //       idx={idx}\n              //       type={type}\n              //       template={template}\n              //     />\n              //   );\n              // }\n              else if (type === \"VIDEO\") {\n                  return /*#__PURE__*/_jsxDEV(TemplateVideo, {\n                    data: content,\n                    setFocus: setFoucsIdx,\n                    provided: provided,\n                    idx: idx,\n                    template: template\n                  }, idx, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 160,\n                    columnNumber: 27\n                  }, this);\n                } else if (type === \"SUMMARY\") {\n                  return /*#__PURE__*/_jsxDEV(Summary, {\n                    data: content,\n                    setFocus: setFoucsIdx,\n                    provided: provided,\n                    idx: idx,\n                    template: template,\n                    focusIdx: foucsIdx,\n                    id: id,\n                    temKey: temKey\n                  }, idx, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 171,\n                    columnNumber: 27\n                  }, this);\n                } // else if (type === 'YOUTUBE') {\n              //   return (\n              //     <TemplateYoutube\n              //       key={idx}\n              //       data={content}\n              //       setFocus={setFoucsIdx}\n              //       provided={provided}\n              //       idx={idx}\n              //       template={template}\n              //     />\n              //   );\n              // }\n\n            }\n          }, id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 19\n          }, this);\n        }) : /*#__PURE__*/_jsxDEV(TemplateEmty, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 15\n        }, this), provided.placeholder]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Screen, \"YxoQEZR8Nq0aCabivVkZ90M6Kwg=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = Screen;\nexport default _c2 = /*#__PURE__*/React.memo(Screen);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Screen\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/gwagbyeongjun/Sourcecode/react/aju-office/src/components/Editor/components/Screen.jsx"],"names":["React","useCallback","useState","useEffect","useSelector","useDispatch","Droppable","DragDropContext","Draggable","resetServerContext","TemplateImage","TemplateEmty","TemplateTitle","TemplateVideo","Summary","Screen","temKey","Fstore","Fstorage","dispatch","template","state","database","editor","foucsIdx","setFoucsIdx","handleOnDragEnd","result","destination","currentTags","beforeDragItemIndex","source","index","afterDragItemIndex","removeTag","splice","type","payload","__deleteTemplate","idx","length","arr","slice","deleteTem","event","key","nowTemplate","resize","url","content","refFromURL","delete","collection","doc","update","text","images","forEach","img","document","addEventListener","removeEventListener","provided","droppableProps","innerRef","map","id","placeholder","memo"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,QAA7B,EAAuCC,SAAvC,QAAwD,OAAxD;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SACEC,SADF,EAEEC,eAFF,EAGEC,SAHF,EAIEC,kBAJF,QAKO,qBALP;AAMA,OAAOC,aAAP,MAA0B,0BAA1B;AACA,OAAOC,YAAP,MAAyB,yBAAzB;AACA,OAAOC,aAAP,MAA0B,0BAA1B,C,CACA;;AACA,OAAOC,aAAP,MAA0B,0BAA1B,C,CACA;;AACA,OAAOC,OAAP,MAAoB,oBAApB;;AACAL,kBAAkB;;AAElB,SAASM,MAAT,CAAgB;AAAEC,EAAAA,MAAF;AAAUC,EAAAA,MAAV;AAAkBC,EAAAA;AAAlB,CAAhB,EAA8C;AAAA;;AAC5C,QAAMC,QAAQ,GAAGd,WAAW,EAA5B;AACA,QAAMe,QAAQ,GAAGhB,WAAW,CAAEiB,KAAD,IAAWA,KAAK,CAACC,QAAN,CAAeC,MAA3B,CAA5B;AACA,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BvB,QAAQ,CAAC,CAAD,CAAxC;AACA,QAAMwB,eAAe,GAAGzB,WAAW,CAChC0B,MAAD,IAAY;AACVF,IAAAA,WAAW,CAAC,CAAC,CAAF,CAAX;AACA,QAAI,CAACE,MAAM,CAACC,WAAZ,EAAyB;AACzB,UAAMC,WAAW,GAAG,CAAC,GAAGT,QAAJ,CAApB;AACA,UAAMU,mBAAmB,GAAGH,MAAM,CAACI,MAAP,CAAcC,KAA1C;AACA,UAAMC,kBAAkB,GAAGN,MAAM,CAACC,WAAP,CAAmBI,KAA9C;AACA,UAAME,SAAS,GAAGL,WAAW,CAACM,MAAZ,CAAmBL,mBAAnB,EAAwC,CAAxC,CAAlB;AAEAD,IAAAA,WAAW,CAACM,MAAZ,CAAmBF,kBAAnB,EAAuC,CAAvC,EAA0CC,SAAS,CAAC,CAAD,CAAnD;AAEAf,IAAAA,QAAQ,CAAC;AACPiB,MAAAA,IAAI,EAAE,wBADC;AAEPC,MAAAA,OAAO,EAAER;AAFF,KAAD,CAAR;AAID,GAfgC,EAgBjC,CAACT,QAAD,EAAWD,QAAX,CAhBiC,CAAnC;;AAkBA,QAAMmB,gBAAgB,GAAGrC,WAAW,CACjCsC,GAAD,IAAS;AACP,QAAInB,QAAQ,CAACoB,MAAT,GAAkB,CAAtB,EAAyB;AACvBf,MAAAA,WAAW,CAAC,CAAC,CAAF,CAAX;AACA,YAAMgB,GAAG,GAAGrB,QAAQ,CAACsB,KAAT,EAAZ;AACAD,MAAAA,GAAG,CAACN,MAAJ,CAAWI,GAAX,EAAgB,CAAhB;AACApB,MAAAA,QAAQ,CAAC;AACPiB,QAAAA,IAAI,EAAE,wBADC;AAEPC,QAAAA,OAAO,EAAEI;AAFF,OAAD,CAAR;AAID;AACF,GAXiC,EAYlC,CAACrB,QAAD,EAAWD,QAAX,CAZkC,CAApC;;AAcAhB,EAAAA,SAAS,CAAC,MAAM;AACd,aAASwC,SAAT,CAAmBC,KAAnB,EAA0B;AACxB,UAAIA,KAAK,CAACC,GAAN,KAAc,WAAd,IAA6BzB,QAAQ,CAACoB,MAAT,GAAkB,CAAnD,EAAsD;AACpD,cAAMC,GAAG,GAAGrB,QAAQ,CAACsB,KAAT,EAAZ;AACA,YAAII,WAAW,GAAGL,GAAG,CAACjB,QAAD,CAArB;;AACA,YAAIsB,WAAW,CAACV,IAAZ,KAAqB,OAArB,IAAgCU,WAAW,CAACV,IAAZ,KAAqB,SAAzD,EAAoE;AAClEX,UAAAA,WAAW,CAAC,CAAC,CAAF,CAAX;;AAEA,cAAIqB,WAAW,CAACV,IAAZ,KAAqB,OAAzB,EAAkC;AAChC,kBAAM;AAAEW,cAAAA,MAAF;AAAUC,cAAAA;AAAV,gBAAkBF,WAAW,CAACG,OAApC;AACA/B,YAAAA,QAAQ,CAACgC,UAAT,CAAoBH,MAApB,EAA4BI,MAA5B;AACAjC,YAAAA,QAAQ,CAACgC,UAAT,CAAoBF,GAApB,EAAyBG,MAAzB;AACD;;AACD,cAAIL,WAAW,CAACV,IAAZ,KAAqB,OAAzB,EAAkC;AAChClB,YAAAA,QAAQ,CAACgC,UAAT,CAAoBJ,WAAW,CAACG,OAAhC,EAAyCE,MAAzC;AACD;;AACDV,UAAAA,GAAG,CAACN,MAAJ,CAAWX,QAAX,EAAqB,CAArB;AACAP,UAAAA,MAAM,CAACmC,UAAP,CAAkB,QAAlB,EAA4BC,GAA5B,CAAgCrC,MAAhC,EAAwCsC,MAAxC,CAA+C;AAAElC,YAAAA,QAAQ,EAAEqB;AAAZ,WAA/C;AACAtB,UAAAA,QAAQ,CAAC;AACPiB,YAAAA,IAAI,EAAE,wBADC;AAEPC,YAAAA,OAAO,EAAEI;AAFF,WAAD,CAAR;AAID,SAjBD,MAiBO;AACLA,UAAAA,GAAG,CAACN,MAAJ,CAAWX,QAAX,EAAqB,CAArB;;AACA,cACEsB,WAAW,CAACV,IAAZ,KAAqB,OAArB,IACAZ,QAAQ,KAAK,CADb,IAEAsB,WAAW,CAACG,OAAZ,CAAoBT,MAApB,KAA+B,CAHjC,EAIE;AACArB,YAAAA,QAAQ,CAAC;AACPiB,cAAAA,IAAI,EAAE,wBADC;AAEPC,cAAAA,OAAO,EAAEI;AAFF,aAAD,CAAR;AAID;;AACD,cACEK,WAAW,CAACV,IAAZ,KAAqB,SAArB,IACAU,WAAW,CAACG,OAAZ,CAAoBM,IAApB,CAAyBf,MAAzB,KAAoC,CAFtC,EAGE;AACAM,YAAAA,WAAW,CAACG,OAAZ,CAAoBO,MAApB,CAA2BC,OAA3B,CAAmC,CAAC;AAAEV,cAAAA,MAAF;AAAUW,cAAAA;AAAV,aAAD,KAAqB;AACtDxC,cAAAA,QAAQ,CAACgC,UAAT,CAAoBH,MAApB,EAA4BI,MAA5B;AACAjC,cAAAA,QAAQ,CAACgC,UAAT,CAAoBQ,GAApB,EAAyBP,MAAzB;AACAlC,cAAAA,MAAM,CAACmC,UAAP,CAAkB,QAAlB,EAA4BC,GAA5B,CAAgCrC,MAAhC,EAAwCsC,MAAxC,CAA+C;AAAElC,gBAAAA,QAAQ,EAAEqB;AAAZ,eAA/C;AACD,aAJD;AAKD;;AACDhB,UAAAA,WAAW,CAAC,CAAC,CAAF,CAAX;AACD;AACF;AACF;;AACDkC,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,EAAqCjB,SAArC;AACA,WAAO,MAAM;AACXgB,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,SAA7B,EAAwClB,SAAxC;AACD,KAFD;AAGD,GApDQ,EAoDN,CAACnB,QAAD,EAAWJ,QAAX,EAAqBD,QAArB,EAA+BH,MAA/B,EAAuCC,MAAvC,EAA+CC,QAA/C,CApDM,CAAT;AAqDA,sBACE,QAAC,eAAD;AAAiB,IAAA,SAAS,EAAEQ,eAA5B;AAAA,2BACE,QAAC,SAAD;AAAW,MAAA,WAAW,EAAC,MAAvB;AAA8B,MAAA,SAAS,EAAC,UAAxC;AAAA,gBACIoC,QAAD,iBACC;AACE,QAAA,SAAS,EAAC,eADZ;AAAA,WAEMA,QAAQ,CAACC,cAFf;AAGE,QAAA,GAAG,EAAED,QAAQ,CAACE,QAHhB;AAAA,mBAKG5C,QAAQ,CAACoB,MAAT,GAAkB,CAAlB,GACCpB,QAAQ,CAAC6C,GAAT,CAAa,CAAC;AAAE7B,UAAAA,IAAF;AAAQa,UAAAA,OAAR;AAAiBiB,UAAAA;AAAjB,SAAD,EAAwB3B,GAAxB,KAAgC;AAC3C,8BACE,QAAC,SAAD;AAAoB,YAAA,WAAW,EAAE2B,EAAjC;AAAqC,YAAA,KAAK,EAAE3B,GAA5C;AAAA,sBACIuB,QAAD,IAAc;AACb,kBAAI1B,IAAI,KAAK,OAAb,EAAsB;AACpB,oCACE,QAAC,aAAD;AACE,kBAAA,IAAI,EAAEa,OADR;AAGE,kBAAA,GAAG,EAAEV,GAHP;AAIE,kBAAA,QAAQ,EAAEuB,QAJZ;AAKE,kBAAA,QAAQ,EAAErC,WALZ;AAME,kBAAA,QAAQ,EAAEL,QANZ;AAOE,kBAAA,QAAQ,EAAEI;AAPZ,mBAEOe,GAFP;AAAA;AAAA;AAAA;AAAA,wBADF;AAWD,eAZD,MAYO,IAAIH,IAAI,KAAK,OAAb,EAAsB;AAC3B,oCACE,QAAC,aAAD;AAEE,kBAAA,IAAI,EAAEa,OAFR;AAGE,kBAAA,QAAQ,EAAEa,QAHZ;AAIE,kBAAA,GAAG,EAAEvB,GAJP;AAKE,kBAAA,QAAQ,EAAEd,WALZ;AAME,kBAAA,QAAQ,EAAED,QANZ;AAOE,kBAAA,QAAQ,EAAEc;AAPZ,mBACOC,GADP;AAAA;AAAA;AAAA;AAAA,wBADF;AAWD,eAZM,CAaP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxBO,mBAyBF,IAAIH,IAAI,KAAK,OAAb,EAAsB;AACzB,sCACE,QAAC,aAAD;AAEE,oBAAA,IAAI,EAAEa,OAFR;AAGE,oBAAA,QAAQ,EAAExB,WAHZ;AAIE,oBAAA,QAAQ,EAAEqC,QAJZ;AAKE,oBAAA,GAAG,EAAEvB,GALP;AAME,oBAAA,QAAQ,EAAEnB;AANZ,qBACOmB,GADP;AAAA;AAAA;AAAA;AAAA,0BADF;AAUD,iBAXI,MAWE,IAAIH,IAAI,KAAK,SAAb,EAAwB;AAC7B,sCACE,QAAC,OAAD;AAEE,oBAAA,IAAI,EAAEa,OAFR;AAGE,oBAAA,QAAQ,EAAExB,WAHZ;AAIE,oBAAA,QAAQ,EAAEqC,QAJZ;AAKE,oBAAA,GAAG,EAAEvB,GALP;AAME,oBAAA,QAAQ,EAAEnB,QANZ;AAOE,oBAAA,QAAQ,EAAEI,QAPZ;AAQE,oBAAA,EAAE,EAAE0C,EARN;AASE,oBAAA,MAAM,EAAElD;AATV,qBACOuB,GADP;AAAA;AAAA;AAAA;AAAA,0BADF;AAaD,iBA/DY,CAgEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACD;AA7EH,aAAgB2B,EAAhB;AAAA;AAAA;AAAA;AAAA,kBADF;AAiFD,SAlFD,CADD,gBAqFC,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA,gBA1FJ,EA4FGJ,QAAQ,CAACK,WA5FZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAsGD;;GA/LQpD,M;UACUV,W,EACAD,W;;;KAFVW,M;AAiMT,kCAAef,KAAK,CAACoE,IAAN,CAAWrD,MAAX,CAAf","sourcesContent":["import React, { useCallback, useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  Droppable,\n  DragDropContext,\n  Draggable,\n  resetServerContext,\n} from \"react-beautiful-dnd\";\nimport TemplateImage from \"./Template/TemplateImage\";\nimport TemplateEmty from \"./Template/TemplateEmty\";\nimport TemplateTitle from \"./Template/TemplateTitle\";\n// import TemplateLink from \"./Template/TemplateLink\";\nimport TemplateVideo from \"./Template/TemplateVideo\";\n// import TemplateYoutube from \"./Template/TemplateYoutube\";\nimport Summary from \"./Template/Summary\";\nresetServerContext();\n\nfunction Screen({ temKey, Fstore, Fstorage }) {\n  const dispatch = useDispatch();\n  const template = useSelector((state) => state.database.editor);\n  const [foucsIdx, setFoucsIdx] = useState(0);\n  const handleOnDragEnd = useCallback(\n    (result) => {\n      setFoucsIdx(-1);\n      if (!result.destination) return;\n      const currentTags = [...template];\n      const beforeDragItemIndex = result.source.index;\n      const afterDragItemIndex = result.destination.index;\n      const removeTag = currentTags.splice(beforeDragItemIndex, 1);\n\n      currentTags.splice(afterDragItemIndex, 0, removeTag[0]);\n\n      dispatch({\n        type: \"@layouts/CHANGE_EDITOR\",\n        payload: currentTags,\n      });\n    },\n    [template, dispatch]\n  );\n  const __deleteTemplate = useCallback(\n    (idx) => {\n      if (template.length > 1) {\n        setFoucsIdx(-1);\n        const arr = template.slice();\n        arr.splice(idx, 1);\n        dispatch({\n          type: \"@layouts/CHANGE_EDITOR\",\n          payload: arr,\n        });\n      }\n    },\n    [template, dispatch]\n  );\n  useEffect(() => {\n    function deleteTem(event) {\n      if (event.key === \"Backspace\" && template.length > 1) {\n        const arr = template.slice();\n        let nowTemplate = arr[foucsIdx];\n        if (nowTemplate.type !== \"TITLE\" && nowTemplate.type !== \"SUMMARY\") {\n          setFoucsIdx(-1);\n\n          if (nowTemplate.type === \"IMAGE\") {\n            const { resize, url } = nowTemplate.content;\n            Fstorage.refFromURL(resize).delete();\n            Fstorage.refFromURL(url).delete();\n          }\n          if (nowTemplate.type === \"VIDEO\") {\n            Fstorage.refFromURL(nowTemplate.content).delete();\n          }\n          arr.splice(foucsIdx, 1);\n          Fstore.collection(\"editor\").doc(temKey).update({ template: arr });\n          dispatch({\n            type: \"@layouts/CHANGE_EDITOR\",\n            payload: arr,\n          });\n        } else {\n          arr.splice(foucsIdx, 1);\n          if (\n            nowTemplate.type === \"TITLE\" &&\n            foucsIdx !== 0 &&\n            nowTemplate.content.length === 0\n          ) {\n            dispatch({\n              type: \"@layouts/CHANGE_EDITOR\",\n              payload: arr,\n            });\n          }\n          if (\n            nowTemplate.type === \"SUMMARY\" &&\n            nowTemplate.content.text.length === 0\n          ) {\n            nowTemplate.content.images.forEach(({ resize, img }) => {\n              Fstorage.refFromURL(resize).delete();\n              Fstorage.refFromURL(img).delete();\n              Fstore.collection(\"editor\").doc(temKey).update({ template: arr });\n            });\n          }\n          setFoucsIdx(-1);\n        }\n      }\n    }\n    document.addEventListener(\"keydown\", deleteTem);\n    return () => {\n      document.removeEventListener(\"keydown\", deleteTem);\n    };\n  }, [foucsIdx, template, dispatch, temKey, Fstore, Fstorage]);\n  return (\n    <DragDropContext onDragEnd={handleOnDragEnd}>\n      <Droppable droppableId=\"tags\" direction=\"vertical\">\n        {(provided) => (\n          <div\n            className=\"editor-screen\"\n            {...provided.droppableProps}\n            ref={provided.innerRef}\n          >\n            {template.length > 0 ? (\n              template.map(({ type, content, id }, idx) => {\n                return (\n                  <Draggable key={id} draggableId={id} index={idx}>\n                    {(provided) => {\n                      if (type === \"IMAGE\") {\n                        return (\n                          <TemplateImage\n                            data={content}\n                            key={idx}\n                            idx={idx}\n                            provided={provided}\n                            setFocus={setFoucsIdx}\n                            template={template}\n                            focusIdx={foucsIdx}\n                          />\n                        );\n                      } else if (type === \"TITLE\") {\n                        return (\n                          <TemplateTitle\n                            key={idx}\n                            data={content}\n                            provided={provided}\n                            idx={idx}\n                            setFocus={setFoucsIdx}\n                            focusIdx={foucsIdx}\n                            __delete={__deleteTemplate}\n                          />\n                        );\n                      }\n                      //  else if (type === 'LINK' || type === 'FILE') {\n                      //   return (\n                      //     <TemplateLink\n                      //       key={idx}\n                      //       data={content}\n                      //       provided={provided}\n                      //       idx={idx}\n                      //       type={type}\n                      //       template={template}\n                      //     />\n                      //   );\n                      // }\n                      else if (type === \"VIDEO\") {\n                        return (\n                          <TemplateVideo\n                            key={idx}\n                            data={content}\n                            setFocus={setFoucsIdx}\n                            provided={provided}\n                            idx={idx}\n                            template={template}\n                          />\n                        );\n                      } else if (type === \"SUMMARY\") {\n                        return (\n                          <Summary\n                            key={idx}\n                            data={content}\n                            setFocus={setFoucsIdx}\n                            provided={provided}\n                            idx={idx}\n                            template={template}\n                            focusIdx={foucsIdx}\n                            id={id}\n                            temKey={temKey}\n                          />\n                        );\n                      }\n                      // else if (type === 'YOUTUBE') {\n                      //   return (\n                      //     <TemplateYoutube\n                      //       key={idx}\n                      //       data={content}\n                      //       setFocus={setFoucsIdx}\n                      //       provided={provided}\n                      //       idx={idx}\n                      //       template={template}\n                      //     />\n                      //   );\n                      // }\n                    }}\n                  </Draggable>\n                );\n              })\n            ) : (\n              <TemplateEmty />\n            )}\n            {provided.placeholder}\n          </div>\n        )}\n      </Droppable>\n    </DragDropContext>\n  );\n}\n\nexport default React.memo(Screen);\n"]},"metadata":{},"sourceType":"module"}