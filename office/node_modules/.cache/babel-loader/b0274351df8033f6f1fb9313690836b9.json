{"ast":null,"code":"var _jsxFileName = \"/Users/gwagbyeongjun/Sourcecode/react/aju-office/src/components/Editor/components/Screen.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Droppable, DragDropContext, Draggable, resetServerContext } from 'react-beautiful-dnd';\nimport TemplateImage from './Template/TemplateImage';\nimport TemplateEmty from './Template/TemplateEmty';\nimport TemplateTitle from './Template/TemplateTitle';\nimport TemplateLink from './Template/TemplateLink';\nimport TemplateVideo from './Template/TemplateVideo';\nimport TemplateYoutube from './Template/TemplateYoutube';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nresetServerContext();\n\nfunction Screen() {\n  _s();\n\n  const dispatch = useDispatch();\n  const template = useSelector(state => state.database.editor);\n  const [foucsIdx, setFoucsIdx] = useState(0);\n  const handleOnDragEnd = useCallback(result => {\n    setFoucsIdx(-1);\n    if (!result.destination) return;\n    const currentTags = [...template];\n    const beforeDragItemIndex = result.source.index;\n    const afterDragItemIndex = result.destination.index;\n    const removeTag = currentTags.splice(beforeDragItemIndex, 1);\n    currentTags.splice(afterDragItemIndex, 0, removeTag[0]);\n    dispatch({\n      type: '@layouts/CHANGE_EDITOR',\n      payload: currentTags\n    });\n  }, [template, dispatch]);\n\n  const __deleteTemplate = useCallback(idx => {\n    if (template.length > 1) {\n      setFoucsIdx(-1);\n      const arr = template.slice();\n      arr.splice(idx, 1);\n      dispatch({\n        type: '@layouts/CHANGE_EDITOR',\n        payload: arr\n      });\n    }\n  }, [template, dispatch]);\n\n  useEffect(() => {\n    function deleteTem(event) {\n      if (event.key === 'Backspace' && foucsIdx !== 0) {\n        const arr = template.slice();\n        let nowTemplate = arr[foucsIdx];\n\n        if (nowTemplate.type !== 'TITLE') {\n          setFoucsIdx(-1);\n\n          if (nowTemplate.type === 'IMAGE' || nowTemplate.type === 'VIDEO' || nowTemplate.type === 'FILE') {\n            dispatch({\n              type: '@layouts/INIT_DELETELIST',\n              payload: nowTemplate.type === 'IMAGE' || nowTemplate.type === 'VIDEO' ? nowTemplate.content : nowTemplate.content.url\n            });\n          }\n\n          arr.splice(foucsIdx, 1);\n          dispatch({\n            type: '@layouts/CHANGE_EDITOR',\n            payload: arr\n          });\n        } else if (foucsIdx !== 0 && nowTemplate.content.length === 0) {\n          setFoucsIdx(-1);\n          arr.splice(foucsIdx, 1);\n          dispatch({\n            type: '@layouts/CHANGE_EDITOR',\n            payload: arr\n          });\n        }\n      }\n    }\n\n    document.addEventListener('keydown', deleteTem);\n    return () => {\n      document.removeEventListener('keydown', deleteTem);\n    };\n  }, [foucsIdx, template, dispatch]);\n  return /*#__PURE__*/_jsxDEV(DragDropContext, {\n    onDragEnd: handleOnDragEnd,\n    children: /*#__PURE__*/_jsxDEV(Droppable, {\n      droppableId: \"tags\",\n      direction: \"vertical\",\n      children: provided => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"editor-screen\",\n        ...provided.droppableProps,\n        ref: provided.innerRef,\n        children: [template.length > 0 ? template.map(({\n          type,\n          content,\n          id\n        }, idx) => {\n          return /*#__PURE__*/_jsxDEV(Draggable, {\n            draggableId: id,\n            index: idx,\n            children: provided => {\n              if (type === 'IMAGE') {\n                return /*#__PURE__*/_jsxDEV(TemplateImage, {\n                  data: content,\n                  idx: idx,\n                  provided: provided,\n                  setFocus: setFoucsIdx,\n                  template: template,\n                  focusIdx: foucsIdx\n                }, idx, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 27\n                }, this);\n              } else if (type === 'TITLE') {\n                return /*#__PURE__*/_jsxDEV(TemplateTitle, {\n                  data: content,\n                  provided: provided,\n                  idx: idx,\n                  setFocus: setFoucsIdx,\n                  focusIdx: foucsIdx,\n                  __delete: __deleteTemplate\n                }, idx, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 27\n                }, this);\n              } else if (type === 'LINK' || type === 'FILE') {\n                return /*#__PURE__*/_jsxDEV(TemplateLink, {\n                  data: content,\n                  provided: provided,\n                  idx: idx,\n                  type: type,\n                  template: template\n                }, idx, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 27\n                }, this);\n              } else if (type === 'VIDEO') {\n                return /*#__PURE__*/_jsxDEV(TemplateVideo, {\n                  data: content,\n                  setFocus: setFoucsIdx,\n                  provided: provided,\n                  idx: idx,\n                  template: template\n                }, idx, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 27\n                }, this);\n              } else if (type === 'YOUTUBE') {\n                return /*#__PURE__*/_jsxDEV(TemplateYoutube, {\n                  data: content,\n                  setFocus: setFoucsIdx,\n                  provided: provided,\n                  idx: idx,\n                  template: template\n                }, idx, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 27\n                }, this);\n              }\n            }\n          }, id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 19\n          }, this);\n        }) : /*#__PURE__*/_jsxDEV(TemplateEmty, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 15\n        }, this), provided.placeholder]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Screen, \"YxoQEZR8Nq0aCabivVkZ90M6Kwg=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = Screen;\nexport default Screen;\n\nvar _c;\n\n$RefreshReg$(_c, \"Screen\");","map":{"version":3,"sources":["/Users/gwagbyeongjun/Sourcecode/react/aju-office/src/components/Editor/components/Screen.jsx"],"names":["React","useCallback","useState","useEffect","useSelector","useDispatch","Droppable","DragDropContext","Draggable","resetServerContext","TemplateImage","TemplateEmty","TemplateTitle","TemplateLink","TemplateVideo","TemplateYoutube","Screen","dispatch","template","state","database","editor","foucsIdx","setFoucsIdx","handleOnDragEnd","result","destination","currentTags","beforeDragItemIndex","source","index","afterDragItemIndex","removeTag","splice","type","payload","__deleteTemplate","idx","length","arr","slice","deleteTem","event","key","nowTemplate","content","url","document","addEventListener","removeEventListener","provided","droppableProps","innerRef","map","id","placeholder"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,QAA7B,EAAuCC,SAAvC,QAAwD,OAAxD;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SACEC,SADF,EAEEC,eAFF,EAGEC,SAHF,EAIEC,kBAJF,QAKO,qBALP;AAMA,OAAOC,aAAP,MAA0B,0BAA1B;AACA,OAAOC,YAAP,MAAyB,yBAAzB;AACA,OAAOC,aAAP,MAA0B,0BAA1B;AACA,OAAOC,YAAP,MAAyB,yBAAzB;AACA,OAAOC,aAAP,MAA0B,0BAA1B;AACA,OAAOC,eAAP,MAA4B,4BAA5B;;AACAN,kBAAkB;;AAElB,SAASO,MAAT,GAAkB;AAAA;;AAChB,QAAMC,QAAQ,GAAGZ,WAAW,EAA5B;AACA,QAAMa,QAAQ,GAAGd,WAAW,CAAEe,KAAD,IAAWA,KAAK,CAACC,QAAN,CAAeC,MAA3B,CAA5B;AACA,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BrB,QAAQ,CAAC,CAAD,CAAxC;AACA,QAAMsB,eAAe,GAAGvB,WAAW,CAChCwB,MAAD,IAAY;AACVF,IAAAA,WAAW,CAAC,CAAC,CAAF,CAAX;AACA,QAAI,CAACE,MAAM,CAACC,WAAZ,EAAyB;AACzB,UAAMC,WAAW,GAAG,CAAC,GAAGT,QAAJ,CAApB;AACA,UAAMU,mBAAmB,GAAGH,MAAM,CAACI,MAAP,CAAcC,KAA1C;AACA,UAAMC,kBAAkB,GAAGN,MAAM,CAACC,WAAP,CAAmBI,KAA9C;AACA,UAAME,SAAS,GAAGL,WAAW,CAACM,MAAZ,CAAmBL,mBAAnB,EAAwC,CAAxC,CAAlB;AAEAD,IAAAA,WAAW,CAACM,MAAZ,CAAmBF,kBAAnB,EAAuC,CAAvC,EAA0CC,SAAS,CAAC,CAAD,CAAnD;AAEAf,IAAAA,QAAQ,CAAC;AACPiB,MAAAA,IAAI,EAAE,wBADC;AAEPC,MAAAA,OAAO,EAAER;AAFF,KAAD,CAAR;AAID,GAfgC,EAgBjC,CAACT,QAAD,EAAWD,QAAX,CAhBiC,CAAnC;;AAkBA,QAAMmB,gBAAgB,GAAGnC,WAAW,CACjCoC,GAAD,IAAS;AACP,QAAInB,QAAQ,CAACoB,MAAT,GAAkB,CAAtB,EAAyB;AACvBf,MAAAA,WAAW,CAAC,CAAC,CAAF,CAAX;AACA,YAAMgB,GAAG,GAAGrB,QAAQ,CAACsB,KAAT,EAAZ;AACAD,MAAAA,GAAG,CAACN,MAAJ,CAAWI,GAAX,EAAgB,CAAhB;AACApB,MAAAA,QAAQ,CAAC;AACPiB,QAAAA,IAAI,EAAE,wBADC;AAEPC,QAAAA,OAAO,EAAEI;AAFF,OAAD,CAAR;AAID;AACF,GAXiC,EAYlC,CAACrB,QAAD,EAAWD,QAAX,CAZkC,CAApC;;AAcAd,EAAAA,SAAS,CAAC,MAAM;AACd,aAASsC,SAAT,CAAmBC,KAAnB,EAA0B;AACxB,UAAIA,KAAK,CAACC,GAAN,KAAc,WAAd,IAA6BrB,QAAQ,KAAK,CAA9C,EAAiD;AAC/C,cAAMiB,GAAG,GAAGrB,QAAQ,CAACsB,KAAT,EAAZ;AACA,YAAII,WAAW,GAAGL,GAAG,CAACjB,QAAD,CAArB;;AACA,YAAIsB,WAAW,CAACV,IAAZ,KAAqB,OAAzB,EAAkC;AAChCX,UAAAA,WAAW,CAAC,CAAC,CAAF,CAAX;;AAEA,cACEqB,WAAW,CAACV,IAAZ,KAAqB,OAArB,IACAU,WAAW,CAACV,IAAZ,KAAqB,OADrB,IAEAU,WAAW,CAACV,IAAZ,KAAqB,MAHvB,EAIE;AACAjB,YAAAA,QAAQ,CAAC;AACPiB,cAAAA,IAAI,EAAE,0BADC;AAEPC,cAAAA,OAAO,EACLS,WAAW,CAACV,IAAZ,KAAqB,OAArB,IAAgCU,WAAW,CAACV,IAAZ,KAAqB,OAArD,GACIU,WAAW,CAACC,OADhB,GAEID,WAAW,CAACC,OAAZ,CAAoBC;AALnB,aAAD,CAAR;AAOD;;AAEDP,UAAAA,GAAG,CAACN,MAAJ,CAAWX,QAAX,EAAqB,CAArB;AACAL,UAAAA,QAAQ,CAAC;AACPiB,YAAAA,IAAI,EAAE,wBADC;AAEPC,YAAAA,OAAO,EAAEI;AAFF,WAAD,CAAR;AAID,SAtBD,MAsBO,IAAIjB,QAAQ,KAAK,CAAb,IAAkBsB,WAAW,CAACC,OAAZ,CAAoBP,MAApB,KAA+B,CAArD,EAAwD;AAC7Df,UAAAA,WAAW,CAAC,CAAC,CAAF,CAAX;AACAgB,UAAAA,GAAG,CAACN,MAAJ,CAAWX,QAAX,EAAqB,CAArB;AACAL,UAAAA,QAAQ,CAAC;AACPiB,YAAAA,IAAI,EAAE,wBADC;AAEPC,YAAAA,OAAO,EAAEI;AAFF,WAAD,CAAR;AAID;AACF;AACF;;AACDQ,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,EAAqCP,SAArC;AACA,WAAO,MAAM;AACXM,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,SAA7B,EAAwCR,SAAxC;AACD,KAFD;AAGD,GAzCQ,EAyCN,CAACnB,QAAD,EAAWJ,QAAX,EAAqBD,QAArB,CAzCM,CAAT;AA0CA,sBACE,QAAC,eAAD;AAAiB,IAAA,SAAS,EAAEO,eAA5B;AAAA,2BACE,QAAC,SAAD;AAAW,MAAA,WAAW,EAAC,MAAvB;AAA8B,MAAA,SAAS,EAAC,UAAxC;AAAA,gBACI0B,QAAD,iBACC;AACE,QAAA,SAAS,EAAC,eADZ;AAAA,WAEMA,QAAQ,CAACC,cAFf;AAGE,QAAA,GAAG,EAAED,QAAQ,CAACE,QAHhB;AAAA,mBAKGlC,QAAQ,CAACoB,MAAT,GAAkB,CAAlB,GACCpB,QAAQ,CAACmC,GAAT,CAAa,CAAC;AAAEnB,UAAAA,IAAF;AAAQW,UAAAA,OAAR;AAAiBS,UAAAA;AAAjB,SAAD,EAAwBjB,GAAxB,KAAgC;AAC3C,8BACE,QAAC,SAAD;AAAoB,YAAA,WAAW,EAAEiB,EAAjC;AAAqC,YAAA,KAAK,EAAEjB,GAA5C;AAAA,sBACIa,QAAD,IAAc;AACb,kBAAIhB,IAAI,KAAK,OAAb,EAAsB;AACpB,oCACE,QAAC,aAAD;AACE,kBAAA,IAAI,EAAEW,OADR;AAGE,kBAAA,GAAG,EAAER,GAHP;AAIE,kBAAA,QAAQ,EAAEa,QAJZ;AAKE,kBAAA,QAAQ,EAAE3B,WALZ;AAME,kBAAA,QAAQ,EAAEL,QANZ;AAOE,kBAAA,QAAQ,EAAEI;AAPZ,mBAEOe,GAFP;AAAA;AAAA;AAAA;AAAA,wBADF;AAWD,eAZD,MAYO,IAAIH,IAAI,KAAK,OAAb,EAAsB;AAC3B,oCACE,QAAC,aAAD;AAEE,kBAAA,IAAI,EAAEW,OAFR;AAGE,kBAAA,QAAQ,EAAEK,QAHZ;AAIE,kBAAA,GAAG,EAAEb,GAJP;AAKE,kBAAA,QAAQ,EAAEd,WALZ;AAME,kBAAA,QAAQ,EAAED,QANZ;AAOE,kBAAA,QAAQ,EAAEc;AAPZ,mBACOC,GADP;AAAA;AAAA;AAAA;AAAA,wBADF;AAWD,eAZM,MAYA,IAAIH,IAAI,KAAK,MAAT,IAAmBA,IAAI,KAAK,MAAhC,EAAwC;AAC7C,oCACE,QAAC,YAAD;AAEE,kBAAA,IAAI,EAAEW,OAFR;AAGE,kBAAA,QAAQ,EAAEK,QAHZ;AAIE,kBAAA,GAAG,EAAEb,GAJP;AAKE,kBAAA,IAAI,EAAEH,IALR;AAME,kBAAA,QAAQ,EAAEhB;AANZ,mBACOmB,GADP;AAAA;AAAA;AAAA;AAAA,wBADF;AAUD,eAXM,MAWA,IAAIH,IAAI,KAAK,OAAb,EAAsB;AAC3B,oCACE,QAAC,aAAD;AAEE,kBAAA,IAAI,EAAEW,OAFR;AAGE,kBAAA,QAAQ,EAAEtB,WAHZ;AAIE,kBAAA,QAAQ,EAAE2B,QAJZ;AAKE,kBAAA,GAAG,EAAEb,GALP;AAME,kBAAA,QAAQ,EAAEnB;AANZ,mBACOmB,GADP;AAAA;AAAA;AAAA;AAAA,wBADF;AAUD,eAXM,MAWA,IAAIH,IAAI,KAAK,SAAb,EAAwB;AAC7B,oCACE,QAAC,eAAD;AAEE,kBAAA,IAAI,EAAEW,OAFR;AAGE,kBAAA,QAAQ,EAAEtB,WAHZ;AAIE,kBAAA,QAAQ,EAAE2B,QAJZ;AAKE,kBAAA,GAAG,EAAEb,GALP;AAME,kBAAA,QAAQ,EAAEnB;AANZ,mBACOmB,GADP;AAAA;AAAA;AAAA;AAAA,wBADF;AAUD;AACF;AA5DH,aAAgBiB,EAAhB;AAAA;AAAA;AAAA;AAAA,kBADF;AAgED,SAjED,CADD,gBAoEC,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA,gBAzEJ,EA2EGJ,QAAQ,CAACK,WA3EZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAqFD;;GAnKQvC,M;UACUX,W,EACAD,W;;;KAFVY,M;AAqKT,eAAeA,MAAf","sourcesContent":["import React, { useCallback, useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport {\n  Droppable,\n  DragDropContext,\n  Draggable,\n  resetServerContext,\n} from 'react-beautiful-dnd';\nimport TemplateImage from './Template/TemplateImage';\nimport TemplateEmty from './Template/TemplateEmty';\nimport TemplateTitle from './Template/TemplateTitle';\nimport TemplateLink from './Template/TemplateLink';\nimport TemplateVideo from './Template/TemplateVideo';\nimport TemplateYoutube from './Template/TemplateYoutube';\nresetServerContext();\n\nfunction Screen() {\n  const dispatch = useDispatch();\n  const template = useSelector((state) => state.database.editor);\n  const [foucsIdx, setFoucsIdx] = useState(0);\n  const handleOnDragEnd = useCallback(\n    (result) => {\n      setFoucsIdx(-1);\n      if (!result.destination) return;\n      const currentTags = [...template];\n      const beforeDragItemIndex = result.source.index;\n      const afterDragItemIndex = result.destination.index;\n      const removeTag = currentTags.splice(beforeDragItemIndex, 1);\n\n      currentTags.splice(afterDragItemIndex, 0, removeTag[0]);\n\n      dispatch({\n        type: '@layouts/CHANGE_EDITOR',\n        payload: currentTags,\n      });\n    },\n    [template, dispatch],\n  );\n  const __deleteTemplate = useCallback(\n    (idx) => {\n      if (template.length > 1) {\n        setFoucsIdx(-1);\n        const arr = template.slice();\n        arr.splice(idx, 1);\n        dispatch({\n          type: '@layouts/CHANGE_EDITOR',\n          payload: arr,\n        });\n      }\n    },\n    [template, dispatch],\n  );\n  useEffect(() => {\n    function deleteTem(event) {\n      if (event.key === 'Backspace' && foucsIdx !== 0) {\n        const arr = template.slice();\n        let nowTemplate = arr[foucsIdx];\n        if (nowTemplate.type !== 'TITLE') {\n          setFoucsIdx(-1);\n\n          if (\n            nowTemplate.type === 'IMAGE' ||\n            nowTemplate.type === 'VIDEO' ||\n            nowTemplate.type === 'FILE'\n          ) {\n            dispatch({\n              type: '@layouts/INIT_DELETELIST',\n              payload:\n                nowTemplate.type === 'IMAGE' || nowTemplate.type === 'VIDEO'\n                  ? nowTemplate.content\n                  : nowTemplate.content.url,\n            });\n          }\n\n          arr.splice(foucsIdx, 1);\n          dispatch({\n            type: '@layouts/CHANGE_EDITOR',\n            payload: arr,\n          });\n        } else if (foucsIdx !== 0 && nowTemplate.content.length === 0) {\n          setFoucsIdx(-1);\n          arr.splice(foucsIdx, 1);\n          dispatch({\n            type: '@layouts/CHANGE_EDITOR',\n            payload: arr,\n          });\n        }\n      }\n    }\n    document.addEventListener('keydown', deleteTem);\n    return () => {\n      document.removeEventListener('keydown', deleteTem);\n    };\n  }, [foucsIdx, template, dispatch]);\n  return (\n    <DragDropContext onDragEnd={handleOnDragEnd}>\n      <Droppable droppableId=\"tags\" direction=\"vertical\">\n        {(provided) => (\n          <div\n            className=\"editor-screen\"\n            {...provided.droppableProps}\n            ref={provided.innerRef}\n          >\n            {template.length > 0 ? (\n              template.map(({ type, content, id }, idx) => {\n                return (\n                  <Draggable key={id} draggableId={id} index={idx}>\n                    {(provided) => {\n                      if (type === 'IMAGE') {\n                        return (\n                          <TemplateImage\n                            data={content}\n                            key={idx}\n                            idx={idx}\n                            provided={provided}\n                            setFocus={setFoucsIdx}\n                            template={template}\n                            focusIdx={foucsIdx}\n                          />\n                        );\n                      } else if (type === 'TITLE') {\n                        return (\n                          <TemplateTitle\n                            key={idx}\n                            data={content}\n                            provided={provided}\n                            idx={idx}\n                            setFocus={setFoucsIdx}\n                            focusIdx={foucsIdx}\n                            __delete={__deleteTemplate}\n                          />\n                        );\n                      } else if (type === 'LINK' || type === 'FILE') {\n                        return (\n                          <TemplateLink\n                            key={idx}\n                            data={content}\n                            provided={provided}\n                            idx={idx}\n                            type={type}\n                            template={template}\n                          />\n                        );\n                      } else if (type === 'VIDEO') {\n                        return (\n                          <TemplateVideo\n                            key={idx}\n                            data={content}\n                            setFocus={setFoucsIdx}\n                            provided={provided}\n                            idx={idx}\n                            template={template}\n                          />\n                        );\n                      } else if (type === 'YOUTUBE') {\n                        return (\n                          <TemplateYoutube\n                            key={idx}\n                            data={content}\n                            setFocus={setFoucsIdx}\n                            provided={provided}\n                            idx={idx}\n                            template={template}\n                          />\n                        );\n                      }\n                    }}\n                  </Draggable>\n                );\n              })\n            ) : (\n              <TemplateEmty />\n            )}\n            {provided.placeholder}\n          </div>\n        )}\n      </Droppable>\n    </DragDropContext>\n  );\n}\n\nexport default Screen;\n"]},"metadata":{},"sourceType":"module"}