{"ast":null,"code":"var _jsxFileName = \"/Users/gwagbyeongjun/Sourcecode/react/aju-office/src/components/Editor/components/VideoCard.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useCallback, useState } from \"react\";\nimport firebaseApp from \"../../../config/firebaseApp\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Fstorage = firebaseApp.storage();\n\nfunction VideoCard({\n  data,\n  __delete,\n  idx,\n  __update,\n  __select,\n  selectList,\n  __upload\n}) {\n  _s();\n\n  console.log(data);\n  const [video, setVideo] = useState(undefined);\n  const [upload, setupload] = useState(undefined);\n  const [uploadstate, setUploadstate] = useState(undefined);\n  const [thumbnail, setthumbnail] = useState(undefined);\n  const [percent, setpercent] = useState(0);\n\n  const __deleteVideo = useCallback(() => {\n    if (video) {\n      Fstorage.refFromURL(thumbnail).delete().then(() => {\n        Fstorage.refFromURL(video).delete().then(() => {\n          __delete(idx);\n        });\n      });\n    } else {\n      if (uploadstate) {\n        uploadstate.task.cancel();\n        setupload(undefined);\n\n        __delete(idx);\n      } else {\n        __delete(idx);\n      }\n    }\n  }, [video, __delete, idx, uploadstate, thumbnail]);\n\n  const __uploadVideo = useCallback(thumbnail => {\n    const update = Fstorage.ref(`editor/video/${data.name}/video`).put(data);\n\n    __upload(idx, update, data.name, thumbnail);\n  }, [data, __upload, idx]);\n\n  const __withdrawThumbnail = useCallback(() => {\n    return new Promise((resolve, reject) => {\n      var url = URL.createObjectURL(data);\n      var video = document.createElement(\"video\");\n      var canvas = document.createElement(\"canvas\");\n      video.addEventListener(\"loadeddata\", function () {\n        video.pause();\n        snapImage();\n      });\n\n      function snapImage() {\n        canvas.width = video.videoWidth;\n        canvas.height = video.videoHeight;\n        canvas.getContext(\"2d\").drawImage(video, 0, 0, canvas.width, canvas.height);\n        var image = canvas.toDataURL();\n        const base = image.split(\",\")[1];\n        Fstorage.ref(`editor/video/${data.name}/thumbnail`).putString(base, \"base64\").then(result => {\n          result.ref.getDownloadURL().then(getDownloadURL => {\n            resolve(getDownloadURL);\n          });\n        });\n      }\n\n      video.preload = \"metadata\";\n      video.src = url; // Load video in Safari / IE11\n\n      video.muted = true;\n      video.playsInline = true;\n      video.play();\n    });\n  }, [data]);\n\n  useEffect(() => {\n    if (percent === 100 && video === undefined && upload) {\n      upload.then(snapshot => {\n        snapshot.ref.getDownloadURL().then(result => {\n          __update(idx, result, data.name, thumbnail);\n        });\n      });\n    }\n\n    return () => {};\n  }, [percent, upload, idx, data.name, thumbnail, __update, video]);\n  useEffect(() => {\n    console.log(\"데이터 감지\");\n\n    if (upload) {\n      upload.on(\"state_changed\", snapshot => {\n        setUploadstate(snapshot);\n        var progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n        setpercent(progress);\n      });\n    }\n\n    return () => {};\n  }, [upload]);\n  useEffect(() => {\n    //데이터가 file인경우 type이 존재\n    if (data.type) {\n      console.log(data.name);\n      console.log(Fstorage.ref(`editor/video/${data.name}/video`)); //썸네일 추출후에 비디오 업로드 시작\n\n      __withdrawThumbnail().then(result => {\n        __uploadVideo(result);\n      });\n    } else if (data.url) {\n      setVideo(data.url);\n      setthumbnail(data.thumbnail);\n      setpercent(100);\n    }\n\n    return () => {\n      setVideo(undefined);\n      setthumbnail(undefined);\n    };\n  }, [__uploadVideo, data, __withdrawThumbnail]);\n  useEffect(() => {\n    if (data.upload) {\n      setupload(data.upload);\n      setthumbnail(data.thumbnail);\n    }\n\n    return () => {};\n  }, [data]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"video-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"thumbnail-wrapper\",\n      children: thumbnail ? /*#__PURE__*/_jsxDEV(\"img\", {\n        src: thumbnail,\n        alt: \"\\uC378\\uB124\\uC77C\",\n        className: \"video-url\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 11\n      }, this) : undefined\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-progress\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-title\",\n        children: data.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"percent\",\n        children: [parseInt(percent), \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progress-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-bar\",\n          style: {\n            transform: `translateX(${-100 + percent}%)`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"check_circle\",\n      onClick: () => {\n        if (video) {\n          __select(video);\n        }\n      },\n      src: `/assets/editor/check${selectList.indexOf(video) > -1 ? \"active\" : \"\"}.svg`,\n      alt: \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: \"/assets/editor/video-cancel.svg\",\n      alt: \"\",\n      className: \"video-cancel\",\n      onClick: __deleteVideo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 5\n  }, this);\n}\n\n_s(VideoCard, \"XJby8tR/i/IYMyIkRTpNzJNFqQw=\");\n\n_c = VideoCard;\nexport default VideoCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"VideoCard\");","map":{"version":3,"sources":["/Users/gwagbyeongjun/Sourcecode/react/aju-office/src/components/Editor/components/VideoCard.jsx"],"names":["React","useEffect","useCallback","useState","firebaseApp","Fstorage","storage","VideoCard","data","__delete","idx","__update","__select","selectList","__upload","console","log","video","setVideo","undefined","upload","setupload","uploadstate","setUploadstate","thumbnail","setthumbnail","percent","setpercent","__deleteVideo","refFromURL","delete","then","task","cancel","__uploadVideo","update","ref","name","put","__withdrawThumbnail","Promise","resolve","reject","url","URL","createObjectURL","document","createElement","canvas","addEventListener","pause","snapImage","width","videoWidth","height","videoHeight","getContext","drawImage","image","toDataURL","base","split","putString","result","getDownloadURL","preload","src","muted","playsInline","play","snapshot","on","progress","bytesTransferred","totalBytes","type","parseInt","transform","indexOf"],"mappings":"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","sourcesContent":["import React, { useEffect, useCallback, useState } from \"react\";\nimport firebaseApp from \"../../../config/firebaseApp\";\nconst Fstorage = firebaseApp.storage();\nfunction VideoCard({\n  data,\n  __delete,\n  idx,\n  __update,\n  __select,\n  selectList,\n  __upload,\n}) {\n  console.log(data);\n  const [video, setVideo] = useState(undefined);\n  const [upload, setupload] = useState(undefined);\n  const [uploadstate, setUploadstate] = useState(undefined);\n  const [thumbnail, setthumbnail] = useState(undefined);\n  const [percent, setpercent] = useState(0);\n  const __deleteVideo = useCallback(() => {\n    if (video) {\n      Fstorage.refFromURL(thumbnail)\n        .delete()\n        .then(() => {\n          Fstorage.refFromURL(video)\n            .delete()\n            .then(() => {\n              __delete(idx);\n            });\n        });\n    } else {\n      if (uploadstate) {\n        uploadstate.task.cancel();\n        setupload(undefined);\n        __delete(idx);\n      } else {\n        __delete(idx);\n      }\n    }\n  }, [video, __delete, idx, uploadstate, thumbnail]);\n  const __uploadVideo = useCallback(\n    (thumbnail) => {\n      const update = Fstorage.ref(`editor/video/${data.name}/video`).put(data);\n      __upload(idx, update, data.name, thumbnail);\n    },\n    [data, __upload, idx]\n  );\n  const __withdrawThumbnail = useCallback(() => {\n    return new Promise((resolve, reject) => {\n      var url = URL.createObjectURL(data);\n      var video = document.createElement(\"video\");\n      var canvas = document.createElement(\"canvas\");\n\n      video.addEventListener(\"loadeddata\", function () {\n        video.pause();\n        snapImage();\n      });\n      function snapImage() {\n        canvas.width = video.videoWidth;\n        canvas.height = video.videoHeight;\n        canvas\n          .getContext(\"2d\")\n          .drawImage(video, 0, 0, canvas.width, canvas.height);\n        var image = canvas.toDataURL();\n        const base = image.split(\",\")[1];\n        Fstorage.ref(`editor/video/${data.name}/thumbnail`)\n          .putString(base, \"base64\")\n          .then((result) => {\n            result.ref.getDownloadURL().then((getDownloadURL) => {\n              resolve(getDownloadURL);\n            });\n          });\n      }\n      video.preload = \"metadata\";\n      video.src = url;\n      // Load video in Safari / IE11\n      video.muted = true;\n      video.playsInline = true;\n      video.play();\n    });\n  }, [data]);\n  useEffect(() => {\n    if (percent === 100 && video === undefined && upload) {\n      upload.then((snapshot) => {\n        snapshot.ref.getDownloadURL().then((result) => {\n          __update(idx, result, data.name, thumbnail);\n        });\n      });\n    }\n    return () => {};\n  }, [percent, upload, idx, data.name, thumbnail, __update, video]);\n  useEffect(() => {\n    console.log(\"데이터 감지\");\n    if (upload) {\n      upload.on(\"state_changed\", (snapshot) => {\n        setUploadstate(snapshot);\n        var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        setpercent(progress);\n      });\n    }\n    return () => {};\n  }, [upload]);\n  useEffect(() => {\n    //데이터가 file인경우 type이 존재\n\n    if (data.type) {\n      console.log(data.name);\n      console.log(Fstorage.ref(`editor/video/${data.name}/video`));\n      //썸네일 추출후에 비디오 업로드 시작\n      __withdrawThumbnail().then((result) => {\n        __uploadVideo(result);\n      });\n    } else if (data.url) {\n      setVideo(data.url);\n      setthumbnail(data.thumbnail);\n      setpercent(100);\n    }\n    return () => {\n      setVideo(undefined);\n      setthumbnail(undefined);\n    };\n  }, [__uploadVideo, data, __withdrawThumbnail]);\n  useEffect(() => {\n    if (data.upload) {\n      setupload(data.upload);\n      setthumbnail(data.thumbnail);\n    }\n    return () => {};\n  }, [data]);\n  return (\n    <div className=\"video-card\">\n      <div className=\"thumbnail-wrapper\">\n        {thumbnail ? (\n          <img src={thumbnail} alt=\"썸네일\" className=\"video-url\" />\n        ) : undefined}\n      </div>\n      <div className=\"card-progress\">\n        <div className=\"video-title\">{data.name}</div>\n        <div className=\"percent\">{parseInt(percent)}%</div>\n        <div className=\"progress-wrapper\">\n          <div\n            className=\"progress-bar\"\n            style={{ transform: `translateX(${-100 + percent}%)` }}\n          />\n        </div>\n      </div>\n      <img\n        className=\"check_circle\"\n        onClick={() => {\n          if (video) {\n            __select(video);\n          }\n        }}\n        src={`/assets/editor/check${\n          selectList.indexOf(video) > -1 ? \"active\" : \"\"\n        }.svg`}\n        alt=\"\"\n      />\n      <img\n        src=\"/assets/editor/video-cancel.svg\"\n        alt=\"\"\n        className=\"video-cancel\"\n        onClick={__deleteVideo}\n      />\n    </div>\n  );\n}\n\nexport default VideoCard;\n"]},"metadata":{},"sourceType":"module"}